# 5×5×5 方块搭建三视图程序

基于 JavaScript + Three.js 开发的互动式3D方块搭建程序，实时显示四视图。

## 版本信息

**当前版本**: v0.3.0  
**发布日期**: 2024年12月  
**更新内容**: 撤回/重做功能、代码优化、交互改进

## 核心功能

### 🎯 工作区域
- **5×5×5 立体空间**: 总共125个可放置位置
- **3D网格系统**: 底面、左面、后面网格线提示
- **精确对齐**: 方块完美匹配网格尺寸

### 🖱️ 交互操作
- **左键点击**: 添加方块（点击现有方块在其上方添加，点击底部创建第一层）
- **右键点击**: 删除被点击的方块
- **撤回/重做**: Ctrl+Z撤回，Ctrl+Shift+Z/Ctrl+Y重做（支持50步历史）
- **拖拽旋转**: 鼠标拖拽360度旋转视角
- **滚轮缩放**: 3-20倍距离范围缩放
- **视图切换**: 平滑动画切换到标准视角

### 📐 四视图显示
- **透视图**: 主视图，支持交互操作
- **正视图**: X-Y平面投影
- **侧视图**: Y-Z平面投影  
- **俯视图**: X-Z平面投影
- **实时同步**: 四个视图同步更新

## 操作指南

### 基本操作
1. **添加方块**: 左键点击底部平面创建第一层，或点击现有方块在其上方添加
2. **删除方块**: 右键点击任意方块直接删除
3. **撤回/重做**: Ctrl+Z撤回上一步，Ctrl+Shift+Z或Ctrl+Y重做
4. **旋转视角**: 在透视图中拖拽鼠标旋转3D视角
5. **缩放视图**: 使用鼠标滚轮调整视距
6. **视图切换**: 点击视图切换按钮，享受平滑动画过渡
7. **清空工作区**: 点击"清空"按钮重置所有方块

### 界面布局
- **主视图**: 透视图占据界面主要区域（左侧70%）
- **辅助视图**: 三个正交视图垂直排列（右侧30%）
- **控制面板**: 右上角操作按钮和说明

## 使用方法

1. 直接在浏览器中打开 `index.html`
2. 使用鼠标在透视图中交互
3. 观察四个视图的实时变化

## 文件结构

```
three_views/
├── index.html          # 主页面
├── js/
│   └── main.js        # 核心逻辑
├── README.md          # 说明文档
└── CHANGELOG.md       # 版本更新记录
```

## 技术栈

- HTML5 + CSS3
- JavaScript ES6+
- Three.js (CDN)

## 技术特性

### 坐标系统
- **右手坐标系**: X轴向右（红色）、Y轴向上（绿色）、Z轴向外（蓝色）
- **视角指示**: 彩色坐标轴箭头和标签
- **网格对齐**: 底面、左面、后面网格线系统

### 交互技术
- **智能检测**: 底部5×5检测平面 + 精确的射线交点验证
- **堆叠系统**: 点击方块在其上方添加，点击底部创建第一层
- **容差匹配**: 0.5单位容差范围内的精确匹配
- **双键操作**: 左键添加、右键删除
- **撤回系统**: 双栈技术实现，支持最多50步历史

### 视图系统
- **平滑动画**: 1秒缓动过渡到标准视角
- **双向量插值**: 同时插值相机位置和up向量
- **正交对齐**: 确保切换到完全对齐的正交视图

### 渲染技术
- **WebGL渲染**: 基于Three.js的硬件加速
- **实时光照**: 环境光+方向光照明系统
- **线框显示**: 方块边缘线框增强立体感
- **场景管理**: 分组管理不同类型对象

### 性能优化
- **高效检测**: 射线投射精确点击检测
- **响应式设计**: 自适应窗口大小调整
- **内存管理**: 高效的方块创建和销毁

## 浏览器兼容性

- ✅ Chrome 80+
- ✅ Firefox 75+
- ✅ Safari 13+
- ✅ Edge 80+

## 未来规划

- 🎨 多色彩方块支持
- 💾 作品保存/加载
- 📤 导出STL/OBJ格式
- 🔧 自定义工作区大小
- 📱 移动端支持