# 变更日志

## 版本 0.6.0 (当前版本)

### 🚀 重大更新
- 全新键盘相机控制系统
- 动态视觉中心跟随
- 相机移动边界限制

### ✨ 新增功能
- **键盘控制系统**
  - WASD键：前后左右移动相机
  - 方向键↑↓：相机上下移动（Y轴）
  - 方向键←→：绕视觉中心顺时针/逆时针旋转
  - 流畅的3D空间导航体验

- **动态视觉中心**
  - 视觉中心跟随相机移动
  - 鼠标拖拽和滚轮操作基于当前视觉中心
  - 旋转操作围绕动态中心点进行
  - 预设视图自动重置视觉中心为原点

- **智能边界限制**
  - 相机移动范围限制为工作空间大小×2
  - 防止相机移动过远迷失方向
  - 根据工作空间尺寸动态调整边界
  - 保持合理的探索空间

### 🔧 技术改进
- 修复正交相机视野自适应问题
- 优化相机距离计算公式
- 改进鼠标操作与键盘控制的协调性
- 增强用户操作体验和空间感知

---

## 版本 0.5.0

### 🚀 重大更新
- 模块化架构重构
- 代码拆分为7个独立模块
- 可变工作空间大小系统

### ✨ 新增功能
- **模块化架构**
  - 7个独立模块：主入口、场景管理、相机管理、工作空间构建、方块管理、交互处理、历史管理
  - 依赖注入设计模式
  - 职责分离，单一功能原则
  - 向后兼容的API接口

- **可变工作空间**
  - 支持3×3×3、5×5×5、7×7×7、9×9×9四种尺寸
  - 动态网格线和坐标轴适配
  - 实时重建工作空间元素

### 🔧 技术改进
- 代码量从650行拆分为7个小文件
- 提升可维护性和可扩展性
- 优化代码结构和依赖关系
- 删除冗余代码约30行

---

## 版本 0.4.0

### 🚀 重大更新
- 14视图系统（6标准+8角视图）
- 重力删除逻辑优化
- 全角度检测支持

### ✨ 新增功能
- **14视图系统**
  - 6个标准视图：顶、底、前、后、左、右
  - 8个角视图：从正方体8个角观察中心
  - 紧凑网格布局，优化界面空间利用

- **重力删除系统**
  - 只能删除每个XZ位置的最顶层方块
  - 点击中间方块无反应，避免浮空方块
  - 与添加逻辑形成完美逆向操作

- **全角度检测**
  - 双面渲染检测平面，支持从任何角度创建方块
  - 修复底部视角无法创建方块的问题
  - 保持原有检测逻辑不变

### 🔧 技术改进
- 四元数插值动画，解决视角切换瞬移问题
- 精确的顶层方块检测算法
- 优化界面布局和按钮尺寸
- 提升用户交互体验和操作精度

---

## 版本 0.3.0

### 🚀 重大更新
- 撤回/重做功能系统
- 代码重构和优化
- 底部点击检测修复

### ✨ 新增功能
- **撤回/重做系统**
  - 双栈技术实现撤回和重做
  - 支持最多50步历史记录
  - 快捷键支持：Ctrl+Z（撤回）、Ctrl+Shift+Z/Ctrl+Y（重做）
  - 自动状态保存机制

- **代码优化**
  - 删除冗余代码和未使用方法
  - 提取公共方法减少重复代码
  - 简化轴标签创建逻辑
  - 统一方块创建流程

- **交互改进**
  - 修复底部平面点击检测精度问题
  - 优化坐标转换算法
  - 改进射线投射器设置
  - 精确的网格位置映射

### 🔧 技术改进
- 重构方块创建系统（分离直接创建和状态保存）
- 优化内存使用（历史记录限制）
- 改进代码可维护性
- 减少约100行冗余代码

---

## 版本 0.2.0

### 🚀 重大更新
- 全新的交互逻辑和坐标系统
- 改进的视图切换动画
- 优化的点击检测机制

### ✨ 新增功能
- **坐标系统**
  - 右手坐标系（X右，Y上，Z向外）
  - 彩色坐标轴指示器（X红，Y绿，Z蓝）
  - 坐标轴标签显示

- **交互改进**
  - 左键点击：添加方块（点击现有方块在其上方添加，点击底部平面创建第一层）
  - 右键点击：删除被点击的方块
  - 精确的射线检测，避免误操作
  - 智能方块堆叠系统

- **视图切换**
  - 平滑的相机动画过渡
  - 同时插值位置和up向量
  - 标准正交视图对齐
  - 1秒缓动动画效果

- **点击检测优化**
  - 底部5×5检测平面
  - 交点位置验证机制
  - 容差范围内的精确匹配
  - 多方块重叠时的正确选择

### 🔧 技术改进
- 重构了点击检测逻辑
- 优化了方块创建和删除流程
- 改进了相机控制系统
- 增强了用户交互体验

---

## 版本 0.1.0

### 🎉 首次发布
- 完整的5×5×5方块搭建系统
- 四视图实时同步显示功能

### ✨ 基础功能
- **工作区域**
  - 5×5×5立体工作空间（125个位置）
  - 3D网格线系统（底面、左面、后面）
  - 透明占位方块提升点击精度

- **交互系统**
  - 基础的点击添加/删除方块
  - 鼠标拖拽360度旋转视角
  - 滚轮缩放（3-20倍距离）
  - 一键清空工作区

- **视图系统**
  - 透视图（主视图，70%界面）
  - 正视图（X-Y平面投影）
  - 侧视图（Y-Z平面投影）
  - 俯视图（X-Z平面投影）
  - 四视图实时同步更新

- **渲染优化**
  - WebGL硬件加速渲染
  - 实时光照系统（环境光+方向光）
  - 方块边缘线框显示
  - 响应式界面设计